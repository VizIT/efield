<!DOCTYPE html>
<html>
  <head>
    <title>Visualizing an Electric Field With HTML5 and WebGL</title>
    <link   type="text/css"        href="css/estyle.css" rel="stylesheet" />
    <script type="text/javascript" src="js/gl-matrix.js"></script>
    <script type="text/javascript" src="js/charges.js"></script>
    <script type="text/javascript" src="js/motionEventHandler.js"></script>
    <script type="text/javascript" src="js/WebGL.js"></script>
    <script type="text/javascript" src="js/gaussianSphere.js"></script>
    <script type="text/javascript" src="js/efield.js"></script>
  </head>
  <body>
<!-- Copyright 2013 VizIT Solutions

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License. -->
  <div id="left">
    <div id="topLeft">
      <div id="topLeftContent">
        Visualization<br>
        Instruction<br>
        Technology<br>
      </div>
    </div>
    <div id="lowerLeft">
      Education
    </div>
  </div>
  <div id="right">
    <div id="top">
      <img id="logo" src="images/VizITLogo.png" alt="VizIT Solutions">
    </div>
    <div id="main">
    <div class="content">
        <h1>Visualizing an Electric Field With HTML5 and WebGL</h1>
        <p id="nowebgl" class="error"><p>
        <p class="abstract">
          &nbsp;Illustrations and visualizations of the electric field are ubiquitous in online physics
          courses and ebooks. The current generation of devices with their increased graphics and interaction
          capabilities affords an opportunity to significantly improve on even this well established
          paradigm. Further the wide variety of illustrations and interactions that are available clearly
          shows the advantages of the newer technology.
        </p>
        
        <figure class="right">
          <!--A blank area we can draw on with JavaScript. -->
          <canvas id="drawingSurface" width="400" height="400"></canvas>
          <figcaption>This interactive rendering is generated by<br /> HTML5 JavaScript and WebGL.<figcaption>
        </figure>

        <p>
           Both qualitative and quantitative understanding of this foundational material are
          critical to a student's long term success. Effective and clear explanations along
          with intuitive interactive visualizations and simulations enhance understanding and
          invite exploration. This personal interaction and exploration helps the student
          make the transition from what they know to what they need to know.
        </p>
        <p>
          To be effective, the visualization should be as simple as possible while still
         conveying the desired information. The goal is to bridge the gap between a
         student's mental model and a greater level of understanding. If the visualization
         is too far removed from the student's mental model then it will be difficult
         to engage the student and will not be an effective learning tool.
        </p>
        <p>
          WebGL and OpenGL are particularly well suited for intrinsically three dimensional
         material such as electric and magnetic fields. The example here is initially
         positioned in a similar orientation to common 2D electric field illustrations,
         and should be immediately recognized. In addition, it is reactive to both mouse
         and touch interactions in a standard way. A mouse drag will rotate the diagram
         while a mouse wheel will zoom the image.
        </p>
        <p>
          Another component of usability for instructional technology it the usability for
         the instructor. This example is constructed entirely in WebGL, HTML and JavaScript.
         The general code is capable of rendering an arbitrary set of charges and field lines
         by specifying the charges and their locations, as well as a starting point for
         tracing each field line.
        </p>

        <figure class="left">
          <!--A blank area we can draw on with JavaScript. -->
          <canvas id="drawingSurfaceII" width="400" height="400"></canvas>
          <figcaption>This second rendering required only a few moments<br /> editing.<figcaption>
        </figure>

        <p>
          The second diagram is a single positive charge. This different configuration
         required only a few minutes of time to add another canvas element, specify the single
         charge, and the new start points for the field lines.
        </p>
        <p>
         Scaling with changes in size of the canvas are also not an issue. Each frame
         is rendered, or generated, specifically for the canvas drawing surface. This means
         that it will always adjust for the size of the canvas. The size of the canvas can
         in turn be defined by media specific css giving an appropriate image for virtually
         all situations.
        </p>

        <figure class="right">
          <canvas id="drawingSurfaceIII" width="400" height="400"></canvas>
          <figcaption>Another example is identical to the first, except that the charges are no longer equal.<figcaption>
        </figure>

        <p>
          This third charge configuration is particularly interesting. It is almost the same as the first
         configuration, except that the positive charge has been doubled. It is not possible to directly
         how the charge appears at a large distance by zooming out. It is now easy to see how, when viewed
         from a large distance, the field lines appear to radial. That is, the charge appears almost
         like a point charge.
        </p>

        <figure class="left">
          <canvas id="drawingSurfaceIV" width="400" height="400"></canvas>
          <figcaption>This example includes a Gaussian surface.<figcaption>
        </figure>

        <p>
          Most recently I have added the ability to draw a Gaussian surface.
         Gauss' Law is one of the next steps after understanding electric fields
         and electric flux. The ability to visualize and manipulate Gaussian
         surfaces as well as the charge configuration aids a rapid understanding
         of the relationships among charges, fields and flux.
        </p>

        <p>
          Coming soon, a discussion of how to incorporate these, or similar, visualizations
         into your content.
        </p>

        <hr />
        <hr />
    </div>
    </div>
  </div>
  <script type="text/javascript">
    "use strict";

    var drawingSurface;
    var gaussianSurface;
    var renderer;


    function tryLog(string)
    {
      if(this.console)
      {
        console.log(string);
      }
    }

    /*
     * This function builds the charges creates the charges and places them in a
     * charges object. Edit this to change the charge configuration modeled in this
     * illustration.
     */
    function placeCharges(fieldRenderer)
    {
      var charge1;
      var charge2;

      // Each charge has a charge, then x, y, z coordinates.
      // Each of these is a floating point number.
      charge1 = new Charge(  1.0, -30.0,  0.0, 0.0);
      charge2 = new Charge( -1.0,  30.0,  0.0, 0.0);

      fieldRenderer.addCharge(charge1)
                   .addCharge(charge2);

      return fieldRenderer;
    }

    function placeMoreCharges(fieldRenderer)
    {
      var charge;

      charge = new Charge(1.0, 0.0, 0.0, 0.0);

      fieldRenderer.addCharge(charge);

      return fieldRenderer;
    }

    /*
     * This function builds the charges creates the charges and places them in a
     * charges object. Edit this to change the charge configuration modeled in this
     * illustration.
     */
    function placeStillMoreCharges(fieldRenderer)
    {
      var charge1;
      var charge2;

      // Each charge has a charge, then x, y, z coordinates.
      // Each of these is a floating point number.
      charge1 = new Charge(  2.0, -30.0,  0.0, 0.0);
      charge2 = new Charge( -1.0,  30.0,  0.0, 0.0);

      fieldRenderer.addCharge(charge1)
                   .addCharge(charge2);

      return fieldRenderer;
    }


    /*
     * This sets the start points of flux or field lines that will be traced
     * the generate the illustration. The result is a two dimensional array
     * startPoints[n][4]. The first index is the number of the flux line, and the
     * second index varies from 0-2 for the x, y, and z start coordinates of the
     * field line. The [3] element of the second index is +1.0 or -1.0 indicating
     * whether the fiux line is to be traced along, or in opposition to the
     * electric field. Field lines starting near a negative charge will usually
     * have this indicator as -1.0.
     */
    function placeStartPoints(fieldRenderer)
    {
      fieldRenderer.addStartPoint(-28.0,   0.0,   0.0,    1.0)
                   .addStartPoint(-30.0,   2.0,   0.0,    1.0)
                   .addStartPoint(-30.0,  -2.0,   0.0,    1.0)
                   .addStartPoint(-29.0,   1.0,   1.4142, 1.0)
                   .addStartPoint(-29.0,   1.0,  -1.4142, 1.0)
                   .addStartPoint(-29.0,  -1.0,   1.4142, 1.0)
                   .addStartPoint(-29.0,  -1.0,  -1.4142, 1.0)
                   .addStartPoint(-31.0,   1.0,   1.4142, 1.0)
                   .addStartPoint(-31.0,   1.0,  -1.4142, 1.0)
                   .addStartPoint(-31.0,  -1.0,   1.4142, 1.0)
                   .addStartPoint(-31.0,  -1.0,  -1.4142, 1.0)
                   .addStartPoint(-31.31,  0.54,  1.4142, 1.0)
                   .addStartPoint(-31.31,  0.54, -1.4142, 1.0)
                   .addStartPoint(-31.31, -0.54,  1.4142, 1.0)
                   .addStartPoint(-31.31, -0.54, -1.4142, 1.0);

      return fieldRenderer;
    }

    function placeMoreStartPoints(fieldRenderer)
    {
      fieldRenderer.addStartPoint( 2.0,  0.0,  0.0,    1.0)
                   .addStartPoint(-2.0,  0.0,  0.0,    1.0)
                   .addStartPoint( 0.0,  2.0,  0.0,    1.0)
                   .addStartPoint( 0.0, -2.0,  0.0,    1.0)
                   .addStartPoint( 1.0,  1.0,  1.4142, 1.0)
                   .addStartPoint( 1.0,  1.0, -1.4142, 1.0)
                   .addStartPoint( 1.0, -1.0,  1.4142, 1.0)
                   .addStartPoint( 1.0, -1.0, -1.4142, 1.0)
                   .addStartPoint(-1.0,  1.0,  1.4142, 1.0)
                   .addStartPoint(-1.0,  1.0, -1.4142, 1.0)
                   .addStartPoint(-1.0, -1.0,  1.4142, 1.0)
                   .addStartPoint(-1.0, -1.0, -1.4142, 1.0);

      return fieldRenderer;
    }

    drawingSurface = document.getElementById('drawingSurface');
    renderer       = new fieldRenderer(drawingSurface);
    renderer       = placeCharges(renderer);
    renderer       = placeStartPoints(renderer);

    drawingSurface = document.getElementById('drawingSurfaceII');
    renderer       = new fieldRenderer(drawingSurface);
    renderer       = placeMoreCharges(renderer);
    renderer       = placeMoreStartPoints(renderer);

    drawingSurface = document.getElementById('drawingSurfaceIII');
    renderer       = new fieldRenderer(drawingSurface);
    renderer       = placeStillMoreCharges(renderer);
    renderer       = placeStartPoints(renderer);

    drawingSurface  = document.getElementById('drawingSurfaceIV');
    renderer        = new fieldRenderer(drawingSurface);
    renderer        = placeCharges(renderer);
    renderer        = placeStartPoints(renderer);
    gaussianSurface = new gaussianSphere(0.0, 0.0, 0.0, 45.0);
    renderer        = renderer.addGaussianSurface(gaussianSurface);

  </script>
  <script type="text/javascript">
    "use strict";
    var error;
    var txt;
    var canvasSupported = !!window.HTMLCanvasElement;
    if (canvasSupported)
    { 
      var myCanvas       = document.createElement('canvas');
      var gl             = myCanvas.getContext("experimental-webgl")
                           || myCanvas.getContext("webgl");
      if (!gl)
      {
        txt = "Your browser supports the HTML5 canvas, but does not support WebGL."
      }
    }
    else
    {
      txt = "Your browser does not support the HTML5 canvas, which is required for WebGL."
    }

    if (txt != null)
    {
        txt += " To see the examples on this page, please get a <a href"
            +  "= 'http://www.khronos.org/webgl/wiki/Getting_a_WebGL_Implementation'>browser that supports WebGL</a>.";
        error = document.getElementById("nowebgl");
        error.innerHTML=txt;
        error.style.display="block";
    }
  </script>
</body>
</html>
